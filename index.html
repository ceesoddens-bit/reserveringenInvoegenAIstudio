<!DOCTYPE html>
<html lang="nl" class="dark">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-calendar'%3E%3Crect x='3' y='4' width='18' height='18' rx='2' ry='2'%3E%3C/rect%3E%3Cline x1='16' y1='2' x2='16' y2='6'%3E%3C/line%3E%3Cline x1='8' y1='2' x2='8' y2='6'%3E%3C/line%3E%3Cline x1='3' y1='10' x2='21' y2='10'%3E%3C/line%3E%3C/svg%3E" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Restaurant Reservering</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      /* Simple scrollbar styling for a more modern look */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #111827; /* bg-gray-900 */
      }
      ::-webkit-scrollbar-thumb {
        background: #4b5563; /* bg-gray-600 */
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #6b7280; /* bg-gray-500 */
      }
      /* Style for date picker icon */
      input[type="date"]::-webkit-calendar-picker-indicator {
        filter: invert(1);
        cursor: pointer;
      }
      /* Custom select styling for dropdown arrow and options */
      select.custom-select {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='white'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd' /%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 0.5rem center;
        background-size: 1.5em 1.5em;
      }
      select.custom-select option {
        background: #1f2937; /* bg-gray-800 */
        color: #d1d5db; /* text-gray-300 */
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/client": "https://aistudiocdn.com/react-dom@^19.2.0/client",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/"
  }
}
</script>
</head>
  <body class="bg-gray-900 text-gray-200">
    <div id="root"></div>
    <script type="module">
      import React, { useState, useCallback } from 'react';
      import { createRoot } from 'react-dom/client';

      const WEBHOOK_URL = 'https://ceesodd.app.n8n.cloud/webhook/b92c007f-f797-4739-b5c5-35293bf9d959';

      const initialFormData = {
        datum: '',
        tijd: '',
        naam: '',
        telefoon: '',
        email: '',
        gasten: 1,
        aantekeningen: '',
        bevestigingsmail: true,
      };

      // SVG Icon Components
      const CheckCircleIcon = ({ className }) => (
        React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", className: className, fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" },
          React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" })
        )
      );

      const ExclamationCircleIcon = ({ className }) => (
        React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", className: className, fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" },
          React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" })
        )
      );

      const SpinnerIcon = ({ className }) => (
          React.createElement('svg', { className: className, xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24" },
              React.createElement('circle', { className: "opacity-25", cx: "12", cy: "12", r: "10", stroke: "currentColor", strokeWidth: "4" }),
              React.createElement('path', { className: "opacity-75", fill: "currentColor", d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" })
          )
      );

      const App = () => {
        const [formData, setFormData] = useState(initialFormData);
        const [isLoading, setIsLoading] = useState(false);
        const [submissionStatus, setSubmissionStatus] = useState('idle');
        const [statusMessage, setStatusMessage] = useState('');

        const handleChange = useCallback((e) => {
          const { name, value, type } = e.target;
          
          if (type === 'checkbox') {
            const { checked } = e.target;
            setFormData(prev => ({ ...prev, [name]: checked }));
          } else if (type === 'number') {
            const numValue = parseInt(value, 10);
            setFormData(prev => ({ ...prev, [name]: numValue > 0 ? numValue : 1 }));
          } else {
            setFormData(prev => ({ ...prev, [name]: value }));
          }
        }, []);

        const getFormattedTimestamp = () => {
          const now = new Date();
          const pad = (num) => num.toString().padStart(2, '0');

          const day = pad(now.getDate());
          const month = pad(now.getMonth() + 1);
          const year = now.getFullYear();

          const hours = pad(now.getHours());
          const minutes = pad(now.getMinutes());
          const seconds = pad(now.getSeconds());

          return `${day}-${month}-${year} ${hours}:${minutes}:${seconds}`;
        };

        const handleSubmit = async (e) => {
          e.preventDefault();
          setIsLoading(true);
          setSubmissionStatus('idle');
          setStatusMessage('');

          const payload = {
            ...formData,
            gasten: String(formData.gasten),
            verzonden_op: getFormattedTimestamp(),
          };

          // Rename 'tijd' to 'Tijd' to match the expected field name in the webhook.
          payload.Tijd = payload.tijd;
          delete payload.tijd;

          try {
            const response = await fetch(WEBHOOK_URL, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(payload),
            });

            const responseBody = await response.text();

            if (!response.ok) {
              throw new Error(responseBody || `HTTP error! status: ${response.status}`);
            }
            
            let successMsg = 'Reservering succesvol verzonden!';
            try {
              const jsonResponse = JSON.parse(responseBody);
              successMsg = jsonResponse.message || responseBody;
            } catch (e) {
              successMsg = responseBody || successMsg;
            }

            setStatusMessage(successMsg);
            setSubmissionStatus('success');
            setFormData(initialFormData);
          } catch (error) {
            console.error('Submission failed:', error);
            const errorMessage = error instanceof Error ? error.message : 'Er is iets misgegaan. Probeer het opnieuw.';
            setStatusMessage(errorMessage);
            setSubmissionStatus('error');
          } finally {
            setIsLoading(false);
          }
        };
        
        const minDate = new Date().toISOString().split('T')[0];

        const timeSlots = [];
        for (let h = 17; h <= 22; h++) {
            timeSlots.push(`${h.toString().padStart(2, '0')}:00`);
            if (h < 22) {
                timeSlots.push(`${h.toString().padStart(2, '0')}:30`);
            }
        }

        return React.createElement('div', { className: "min-h-screen flex items-center justify-center p-4 bg-gray-900" },
          React.createElement('div', { className: "w-full max-w-lg mx-auto bg-gray-800 shadow-2xl rounded-2xl p-6 sm:p-8" },
            React.createElement('div', { className: "text-center mb-8" },
              React.createElement('h1', { className: "text-3xl font-bold text-white" }, "Reserveer een Tafel"),
              React.createElement('p', { className: "text-gray-400 mt-2" }, "Vul het formulier in om uw reservering te plaatsen.")
            ),

            submissionStatus === 'success' && React.createElement('div', { className: "bg-green-900/50 border border-green-700 text-green-300 px-4 py-3 rounded-lg relative mb-6 flex items-center", role: "alert" },
              React.createElement(CheckCircleIcon, { className: "w-6 h-6 mr-3" }),
              React.createElement('span', { className: "block sm:inline" }, statusMessage)
            ),

            submissionStatus === 'error' && React.createElement('div', { className: "bg-red-900/50 border border-red-700 text-red-300 px-4 py-3 rounded-lg relative mb-6 flex items-center", role: "alert" },
              React.createElement(ExclamationCircleIcon, { className: "w-6 h-6 mr-3" }),
              React.createElement('span', { className: "block sm:inline" }, statusMessage)
            ),

            React.createElement('form', { onSubmit: handleSubmit, className: "space-y-8" },
              React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-2 gap-8" },
                React.createElement('div', { className: "relative" },
                  React.createElement('input', { type: "date", id: "datum", name: "datum", value: formData.datum, onChange: handleChange, required: true, min: minDate, className: "peer block w-full bg-transparent border-0 border-b-2 border-gray-500 appearance-none focus:outline-none focus:ring-0 focus:border-blue-500 text-gray-200 pt-4 pb-1", placeholder: " " }),
                  React.createElement('label', { htmlFor: "datum", className: "absolute top-4 left-0 text-gray-400 duration-300 transform -translate-y-4 scale-75 origin-[0] peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4" }, "Datum")
                ),
                React.createElement('div', { className: "relative" },
                  React.createElement('select', {
                    id: "tijd",
                    name: "tijd",
                    value: formData.tijd,
                    onChange: handleChange,
                    required: true,
                    className: "peer custom-select block w-full bg-transparent border-0 border-b-2 border-gray-500 appearance-none focus:outline-none focus:ring-0 focus:border-blue-500 text-gray-200 pt-4 pb-1"
                  },
                    React.createElement('option', { value: "", disabled: true }),
                    ...timeSlots.map(time => React.createElement('option', { key: time, value: time }, time))
                  ),
                  React.createElement('label', {
                    htmlFor: "tijd",
                    className: `absolute top-4 left-0 text-gray-400 duration-300 transform origin-[0] peer-focus:scale-75 peer-focus:-translate-y-4 ${formData.tijd ? '-translate-y-4 scale-75' : 'scale-100 translate-y-0'}`
                  }, "Tijd")
                )
              ),

              React.createElement('div', { className: "relative" },
                React.createElement('input', { type: "text", id: "naam", name: "naam", value: formData.naam, onChange: handleChange, required: true, placeholder: " ", className: "peer block w-full bg-transparent border-0 border-b-2 border-gray-500 appearance-none focus:outline-none focus:ring-0 focus:border-blue-500 text-white pt-4 pb-1 px-1" }),
                React.createElement('label', { htmlFor: "naam", className: "absolute top-4 left-1 text-gray-400 duration-300 transform -translate-y-4 scale-75 origin-[0] peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4" }, "Naam")
              ),

              React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-2 gap-8" },
                React.createElement('div', { className: "relative" },
                  React.createElement('input', { type: "tel", id: "telefoon", name: "telefoon", value: formData.telefoon, onChange: handleChange, required: true, placeholder: " ", className: "peer block w-full bg-transparent border-0 border-b-2 border-gray-500 appearance-none focus:outline-none focus:ring-0 focus:border-blue-500 text-white pt-4 pb-1 px-1" }),
                  React.createElement('label', { htmlFor: "telefoon", className: "absolute top-4 left-1 text-gray-400 duration-300 transform -translate-y-4 scale-75 origin-[0] peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4" }, "Telefoonnummer")
                ),
                React.createElement('div', { className: "relative" },
                  React.createElement('input', { type: "email", id: "email", name: "email", value: formData.email, onChange: handleChange, required: true, placeholder: " ", className: "peer block w-full bg-transparent border-0 border-b-2 border-gray-500 appearance-none focus:outline-none focus:ring-0 focus:border-blue-500 text-white pt-4 pb-1 px-1" }),
                  React.createElement('label', { htmlFor: "email", className: "absolute top-4 left-1 text-gray-400 duration-300 transform -translate-y-4 scale-75 origin-[0] peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4" }, "E-mailadres")
                )
              ),
              
              React.createElement('div', { className: "relative" },
                React.createElement('select', {
                  id: "gasten",
                  name: "gasten",
                  value: formData.gasten,
                  onChange: handleChange,
                  required: true,
                  className: "peer custom-select block w-full bg-transparent border-0 border-b-2 border-gray-500 appearance-none focus:outline-none focus:ring-0 focus:border-blue-500 text-gray-200 pt-4 pb-1"
                },
                  ...Array.from({ length: 12 }, (_, i) => i + 1).map(num =>
                    React.createElement('option', { key: num, value: num }, `${num} ${num > 1 ? 'gasten' : 'gast'}`)
                  )
                ),
                React.createElement('label', {
                  htmlFor: "gasten",
                  className: `absolute top-4 left-0 text-gray-400 duration-300 transform origin-[0] peer-focus:scale-75 peer-focus:-translate-y-4 ${formData.gasten ? '-translate-y-4 scale-75' : 'scale-100 translate-y-0'}`
                }, "Aantal gasten")
              ),

              React.createElement('div', { className: "relative" },
                React.createElement('textarea', { id: "aantekeningen", name: "aantekeningen", value: formData.aantekeningen, onChange: handleChange, rows: 3, placeholder: " ", className: "peer block w-full bg-transparent border-0 border-b-2 border-gray-500 appearance-none focus:outline-none focus:ring-0 focus:border-blue-500 text-white pt-4 pb-1 px-1" }),
                React.createElement('label', { htmlFor: "aantekeningen", className: "absolute top-4 left-1 text-gray-400 duration-300 transform -translate-y-4 scale-75 origin-[0] peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4" }, "Aantekeningen (optioneel)")
              ),
              
              React.createElement('div', { className: "flex items-center" },
                React.createElement('input', { id: "bevestigingsmail", name: "bevestigingsmail", type: "checkbox", checked: formData.bevestigingsmail, onChange: handleChange, className: "h-4 w-4 rounded border-gray-500 bg-gray-600 text-blue-500 focus:ring-blue-600" }),
                React.createElement('label', { htmlFor: "bevestigingsmail", className: "ml-3 block text-sm text-gray-300" }, "Stuur mij een bevestigingsmail")
              ),

              React.createElement('div', { className: "pt-2" },
                React.createElement('button', { type: "submit", disabled: isLoading, className: "w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-blue-500 disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors" },
                  isLoading ? React.createElement(React.Fragment, null,
                    React.createElement(SpinnerIcon, { className: "animate-spin -ml-1 mr-3 h-5 w-5 text-white" }),
                    "Verzenden..."
                  ) : 'Verzenden'
                )
              )
            )
          )
        );
      };

      const container = document.getElementById('root');
      if (!container) throw new Error('Could not find root element to mount to');

      const root = createRoot(container);
      root.render(
        React.createElement(React.StrictMode, null,
          React.createElement(App, null)
        )
      );
    </script>
  </body>
</html>
